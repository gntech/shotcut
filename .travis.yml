sudo: required

language: cpp

services:
  - docker

branches:
  only:
  - build-with-travis
  
before_install:
- wget --no-check-certificate https://raw.githubusercontent.com/mltframework/mlt-scripts/master/docker/shotcut-build/Dockerfile
- mkdir shotcut-build
- mv Dockerfile shotcut-build/
- docker build --rm -t ddennedy/shotcut-build shotcut-build
- mkdir work; cd work
- wget --no-check-certificate https://raw.githubusercontent.com/mltframework/shotcut/master/scripts/build-shotcut.sh
- wget --no-check-certificate https://raw.githubusercontent.com/mltframework/shotcut/master/scripts/shotcut.nsi

script:
- docker run -it --rm -v $PWD:/root/shotcut ddennedy/shotcut-build
- docker run -it --rm -v $PWD:/root/shotcut ddennedy/shotcut-build -o Win32
- docker run -it --rm -v $PWD:/root/shotcut ddennedy/shotcut-build -o Win64
